<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Search üé¨</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #0f172a; /* dark navy */
      color: white;
    }
    .card {
      background-color: #1e293b;
      border-radius: 12px;
      padding: 12px;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.05);
      background-color: #334155;
    }
    /* Modal styling */
    #movieModal {
      display: none;
      position: fixed;
      z-index: 50;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.85);
      align-items: center;
      justify-content: center;
    }
    #modalContent {
      background: #1e293b;
      padding: 20px;
      border-radius: 16px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
    }
  </style>
</head>
<body class="flex flex-col items-center p-6">

  <h1 class="text-4xl font-bold mb-2 text-purple-400">Movie Search üé¨</h1>
  <p class="mb-6 text-gray-300">Fetches movie details and displays posters, ratings, and full info.</p>

  <div class="flex w-full max-w-xl mb-8">
    <input id="searchInput" type="text" placeholder="Search for a movie..."
           class="flex-1 px-4 py-2 rounded-l-lg text-black focus:outline-none">
    <button onclick="searchMovie()"
            class="px-4 py-2 bg-purple-500 hover:bg-purple-600 rounded-r-lg">Search</button>
  </div>

  <!-- Featured Movies Section -->
  <h2 id="sectionTitle" class="text-2xl font-semibold text-purple-300 mb-4">üé• Featured Movies</h2>
  <div id="movieContainer" class="grid grid-cols-2 md:grid-cols-4 gap-6 w-full max-w-6xl"></div>

  <!-- Modal -->
  <div id="movieModal" class="hidden">
    <div id="modalContent">
      <span onclick="closeModal()" class="float-right text-gray-300 cursor-pointer text-xl">‚úñ</span>
      <div id="modalBody"></div>
    </div>
  </div>

  <script>
    const API_KEY = "fd5a0230"; // Replace with your OMDb API key
    const movieContainer = document.getElementById("movieContainer");
    const modal = document.getElementById("movieModal");
    const modalBody = document.getElementById("modalBody");
    const searchInput = document.getElementById("searchInput");
    const sectionTitle = document.getElementById("sectionTitle");

    // Default popular movies
    const defaultMovies = [
      "Inception",
      "The Dark Knight",
      "Interstellar",
      "Avengers: Endgame",
      "The Matrix",
      "Gladiator",
      "Titanic",
      "Joker"
    ];

    // Load default movies
    async function loadDefaultMovies() {
      sectionTitle.textContent = "üé• Featured Movies";
      movieContainer.innerHTML = "";
      for (const title of defaultMovies) {
        const res = await fetch(`https://www.omdbapi.com/?apikey=${API_KEY}&t=${title}`);
        const movie = await res.json();

        if (movie.Response === "True") {
          const card = document.createElement("div");
          card.className = "card shadow-lg cursor-pointer";
          card.onclick = () => showDetails(movie.imdbID);

          card.innerHTML = `
            <img src="${movie.Poster !== "N/A" ? movie.Poster : "https://via.placeholder.com/300"}" 
                 alt="Movie Poster" class="rounded-lg mb-2 w-full h-80 object-cover">
            <h2 class="text-lg font-semibold">${movie.Title}</h2>
            <p class="text-gray-400">${movie.Year}</p>
          `;
          movieContainer.appendChild(card);
        }
      }
    }

    // Search movies
    async function searchMovie() {
      const query = searchInput.value.trim();
      if (!query) {
        loadDefaultMovies();
        return;
      }

      const res = await fetch(`https://www.omdbapi.com/?apikey=${API_KEY}&s=${query}`);
      const data = await res.json();

      movieContainer.innerHTML = "";
      sectionTitle.textContent = `üîç Results for "${query}"`;

      if (data.Search) {
        data.Search.forEach(movie => {
          const card = document.createElement("div");
          card.className = "card shadow-lg cursor-pointer";
          card.onclick = () => showDetails(movie.imdbID);

          card.innerHTML = `
            <img src="${movie.Poster !== "N/A" ? movie.Poster : "https://via.placeholder.com/300"}" 
                 alt="Movie Poster" class="rounded-lg mb-2 w-full h-80 object-cover">
            <h2 class="text-lg font-semibold">${movie.Title}</h2>
            <p class="text-gray-400">${movie.Year}</p>
          `;
          movieContainer.appendChild(card);
        });
      } else {
        movieContainer.innerHTML = `<p class="text-red-400">No movies found!</p>`;
      }
    }

    // Show details in modal
    async function showDetails(id) {
      const res = await fetch(`https://www.omdbapi.com/?apikey=${API_KEY}&i=${id}&plot=full`);
      const movie = await res.json();

      modalBody.innerHTML = `
        <h2 class="text-2xl font-bold mb-2">${movie.Title} (${movie.Year})</h2>
        <img src="${movie.Poster !== "N/A" ? movie.Poster : "https://via.placeholder.com/300"}" 
             class="rounded-lg mb-4 w-full max-h-96 object-contain">
        <p class="mb-2"><span class="font-semibold">Genre:</span> ${movie.Genre}</p>
        <p class="mb-2"><span class="font-semibold">Director:</span> ${movie.Director}</p>
        <p class="mb-2"><span class="font-semibold">Actors:</span> ${movie.Actors}</p>
        <p class="mb-2"><span class="font-semibold">IMDB Rating:</span> ‚≠ê ${movie.imdbRating}</p>
        <p class="mb-2"><span class="font-semibold">Plot:</span> ${movie.Plot}</p>
      `;

      modal.style.display = "flex";
    }

    function closeModal() {
      modal.style.display = "none";
    }

    // Keyboard Support
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeModal();
      }
      if (e.key === "Enter" && document.activeElement === searchInput) {
        searchMovie();
      }
    });

    // Detect input clear
    searchInput.addEventListener("input", () => {
      if (searchInput.value.trim() === "") {
        loadDefaultMovies();
      }
    });

    // Load featured movies on page load
    window.onload = () => {
      searchInput.focus();
      loadDefaultMovies();
    };
  </script>
</body>
</html>
